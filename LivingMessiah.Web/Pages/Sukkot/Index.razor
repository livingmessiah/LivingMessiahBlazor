@page "/sukkot"
@using LivingMessiah.Web.Pages.Sukkot.Constants
@using static LivingMessiah.Web.Services.Auth0
@using LivingMessiah.Web.Shared.Sukkot

@using LivingMessiah.Web.Settings
@using Microsoft.Extensions.Options
@inject IOptions<SukkotSettings> SukkotSettings

<AuthorizeView Roles="@Roles.SukkotMenuBar">
	<SukkotSettingsList />
	<SukkotAdminMenubar></SukkotAdminMenubar>
</AuthorizeView>

@using Page = LivingMessiah.Web.Links.Sukkot
@using PageRegistrationSteps = LivingMessiah.Web.Links.Sukkot.RegistrationSteps

<PageTitle>@Page.Title</PageTitle>

<div class="pb-2 mt-4 mb-2 border-bottom">
	<h2><i class="@Page.Icon"></i> @Page.Title</h2>
</div>

<AuthorizeView>
	<Authorized>
		<h3>Hello, @Salutation !</h3>
		<ul>
			@*<li>IsAuthenticated: @context.User.Identity.IsAuthenticated</li>
				<li>IsInRole admin: @context.User.IsInRole("admin")</li>*@
			@*<li>Claims: @context.User.Claims.ToString</li>*@
		</ul>
	</Authorized>
	<NotAuthorized>
		@*<h1>NOT AUTHORIZED</h1>*@
	</NotAuthorized>
</AuthorizeView>

@if (SukkotSettings.Value.SukkotIsOpen)
{
	<div class="d-print-none">
		<div class="row">
			<div class="col-12">
				<img src="@LivingMessiah.Web.Pages.Sukkot.Constants.Blobs.UrlEvents(Other.Banner)"
						 alt="@LivingMessiah.Web.Pages.Sukkot.Constants.Blobs.Url(Other.BannerAlt)"
						 class="img-fluid rounded" />
			</div>
		</div>
	</div>

	@if (SukkotSettings.Value.IsRegistrationClosed)
	{
		<div class="jumbotron">
			<h1 class="display-4">
				<span class="text-danger">Registration is CLOSED</span>
			</h1>
			<h3>
				<span class="text-warning">
					If you would like to join us for Sukkot, please	contact @RegistrationClosedEmail.Name at
					<a href="mailto:@RegistrationClosedEmail.Email?Subject=@RegistrationClosedEmail.Subject" target="_top">@RegistrationClosedEmail.Email</a> &nbsp;<i class="far fa-envelope"></i>.
				</span>
			</h3>
		</div>
	}

	<Introduction/>

	@if (!SukkotSettings.Value.IsRegistrationClosed)
	{
		<RegistrationInfo />
		<PaymentInfo/>
	}
	<Documents/>

	@if (!SukkotSettings.Value.IsRegistrationClosed)
	{
		<br />
		<p class="lead">
			Click the big green button to begin registration.
		</p>

		<div class="row">
			<div class="col-12">

				<a class="btn btn-success btn-lg"
					 href="@Page.RegistrationShell">
					Begin Registration
					<i class="fas fa-caret-right"></i>
				</a>

				<a class="btn btn-warning btn-lg"
					 href="@PageRegistrationSteps.Index">
					@PageRegistrationSteps.StartButtonText
					<i class="@PageRegistrationSteps.StartButtonIcon"></i>
				</a>

			</div>
		</div>

	}

	<hr />

	<SukkotTShirt></SukkotTShirt>

}
else
{
	<div class="jumbotron">
		<h1>
			<span class="text-danger">Registration is Over</span>
		</h1>
	</div>
}